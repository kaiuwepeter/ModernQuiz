import{r as v,p as Z,e as S,g as a,i as t,h as f,t as d,m as p,n as z,E as T,y as B,z as F,F as L,l as M,o}from"./vendor-CZScdcBs.js";import{_ as N,u as $,a as y}from"./index-CBBLvZ2k.js";const U={class:"max-w-7xl mx-auto space-y-6"},j={class:"card"},A={class:"flex items-center justify-between"},G={class:"text-right"},I={class:"bg-yellow-50 px-4 py-2 rounded-lg border border-yellow-200"},J={class:"text-2xl font-bold text-yellow-700"},K={key:0,class:"card bg-gradient-to-r from-green-500 to-emerald-600 text-white"},W={class:"flex items-center justify-between"},q={class:"text-4xl font-bold"},H={class:"text-sm opacity-90 mt-2"},O={class:"card"},P={class:"flex gap-4 border-b border-gray-200"},Q={key:1,class:"card"},R={class:"space-y-4"},X=["max"],Y=["max"],ee=["disabled"],te={key:0},se={key:1},ae={key:0,class:"mt-4 card bg-red-50 border border-red-200"},oe={class:"text-red-800"},ne={key:2,class:"space-y-4"},le={key:0,class:"card text-center py-12"},ie={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},de={class:"text-lg font-bold"},re={class:"text-sm text-gray-600"},ue={key:2,class:"card text-center py-12"},ce={__name:"Bank",setup(ve){const c=$(),i=v("deposit"),r=v(!1),b=v(null),x=v(null),g=v([]),l=v({coins:0,bonusCoins:0});Z(async()=>{await _(),await k()});const V=S(()=>l.value.coins+l.value.bonusCoins>0),_=async()=>{try{const s=await y.get("/bank/balance");s.data.success&&(x.value=s.data.balance)}catch(s){console.error("Failed to load bank balance:",s)}},k=async()=>{try{r.value=!0;const s=await y.get("/bank/deposits");s.data.success&&(g.value=s.data.deposits)}catch(s){console.error("Failed to load deposits:",s)}finally{r.value=!1}},D=async()=>{var s,e;try{r.value=!0,b.value=null;const u=await y.post("/bank/deposit",{coins:l.value.coins,bonus_coins:l.value.bonusCoins});u.data.success?(l.value={coins:0,bonusCoins:0},await c.fetchUser(),await _(),await k(),i.value="deposits"):b.value=u.data.error||"Fehler beim Erstellen der Einlage"}catch(u){b.value=((e=(s=u.response)==null?void 0:s.data)==null?void 0:e.error)||"Fehler beim Erstellen der Einlage"}finally{r.value=!1}},m=s=>s?parseFloat(s).toLocaleString("de-DE",{maximumFractionDigits:0}):"0";return(s,e)=>{var u,h,w,C;return o(),a("div",U,[t("div",j,[t("div",A,[e[7]||(e[7]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"üè¶ Bank"),t("p",{class:"text-gray-600"},"Lege deine Coins an und erhalte Zinsen")],-1)),t("div",G,[t("div",I,[e[6]||(e[6]=t("div",{class:"text-xs text-yellow-600 font-medium"},"Verf√ºgbare Coins",-1)),t("div",J,d(m((u=p(c).user)==null?void 0:u.coins)),1)])])])]),x.value?(o(),a("div",K,[t("div",W,[t("div",null,[e[8]||(e[8]=t("div",{class:"text-sm opacity-90 mb-1"},"Bank-Guthaben",-1)),t("div",q,d(m(x.value.total_deposited)),1),t("div",H," Erwartete Zinsen: "+d(m(x.value.expected_interest)),1)]),e[9]||(e[9]=t("div",{class:"text-6xl opacity-20"},"üí∞",-1))])])):f("",!0),t("div",O,[t("div",P,[t("button",{onClick:e[0]||(e[0]=n=>i.value="deposit"),class:z(["px-4 py-2 font-medium transition-colors",i.value==="deposit"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900"])}," üíµ Einzahlen ",2),t("button",{onClick:e[1]||(e[1]=n=>i.value="deposits"),class:z(["px-4 py-2 font-medium transition-colors",i.value==="deposits"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900"])}," üìã Meine Einlagen ("+d(g.value.length)+") ",3)])]),i.value==="deposit"?(o(),a("div",Q,[e[12]||(e[12]=T('<h2 class="text-2xl font-bold mb-4" data-v-ff0d36b1>Neue Einlage erstellen</h2><div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6" data-v-ff0d36b1><h3 class="font-bold text-blue-900 mb-2" data-v-ff0d36b1>‚ÑπÔ∏è Zinss√§tze</h3><ul class="text-sm text-blue-800 space-y-1" data-v-ff0d36b1><li data-v-ff0d36b1>‚Ä¢ 7 Tage: <strong data-v-ff0d36b1>5% Zinsen</strong> (Vorzeitig: 2%)</li><li data-v-ff0d36b1>‚Ä¢ 14 Tage: <strong data-v-ff0d36b1>12% Zinsen</strong> (Vorzeitig: 5%)</li><li data-v-ff0d36b1>‚Ä¢ 30 Tage: <strong data-v-ff0d36b1>30% Zinsen</strong> (Vorzeitig: 10%)</li></ul></div>',2)),t("div",R,[t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Coins einzahlen:",-1)),B(t("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>l.value.coins=n),type:"number",min:"0",max:((h=p(c).user)==null?void 0:h.coins)||0,class:"input",placeholder:"0"},null,8,X),[[F,l.value.coins,void 0,{number:!0}]]),t("button",{onClick:e[3]||(e[3]=n=>{var E;return l.value.coins=((E=p(c).user)==null?void 0:E.coins)||0}),class:"text-xs text-indigo-600 hover:underline mt-1"}," Maximum: "+d(m((w=p(c).user)==null?void 0:w.coins)),1)]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bonus Coins einzahlen:",-1)),B(t("input",{"onUpdate:modelValue":e[4]||(e[4]=n=>l.value.bonusCoins=n),type:"number",min:"0",max:((C=p(c).user)==null?void 0:C.bonus_coins)||0,class:"input",placeholder:"0"},null,8,Y),[[F,l.value.bonusCoins,void 0,{number:!0}]])])]),t("button",{onClick:D,disabled:!V.value||r.value,class:"w-full mt-6 btn-primary disabled:opacity-50 disabled:cursor-not-allowed"},[r.value?(o(),a("span",te,"Wird erstellt...")):(o(),a("span",se,"üí∞ Einlage erstellen"))],8,ee),b.value?(o(),a("div",ae,[t("p",oe,d(b.value),1)])):f("",!0)])):i.value==="deposits"?(o(),a("div",ne,[r.value?(o(),a("div",le,[...e[13]||(e[13]=[t("div",{class:"spinner mx-auto mb-4"},null,-1),t("p",{class:"text-gray-600"},"Lade Einlagen...",-1)])])):g.value.length>0?(o(),a("div",ie,[(o(!0),a(L,null,M(g.value,n=>(o(),a("div",{key:n.id,class:"card"},[t("div",de,d(m(n.total_amount)),1),t("div",re,"Status: "+d(n.status),1)]))),128))])):(o(),a("div",ue,[e[14]||(e[14]=t("div",{class:"text-6xl mb-4"},"üè¶",-1)),e[15]||(e[15]=t("h3",{class:"text-xl font-bold text-gray-900 mb-2"},"Keine Einlagen",-1)),e[16]||(e[16]=t("p",{class:"text-gray-600 mb-4"},"Erstelle deine erste Einlage und erhalte Zinsen!",-1)),t("button",{onClick:e[5]||(e[5]=n=>i.value="deposit"),class:"btn-primary"}," Jetzt einzahlen ")]))])):f("",!0)])}}},pe=N(ce,[["__scopeId","data-v-ff0d36b1"]]);export{pe as default};
